<!DOCTYPE html>
<html>
<head>
	<title>Gsaads</title>
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
	<![endif]-->
	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
	<%= stylesheet_link_tag    'style' %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
	<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>

	<%= csrf_meta_tags %>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1">
<script>
	function loadChartData(url, chartName, chartType){
		$.get(url, function(data, status){
			var categories = new Array();
			var groupedObjects = new Array();
			var i = 0;

			myobj = {};
			_.each(data.results,function(obj){
				var existingObj;
				var year = obj.time.substring(0, 4);
				if($.inArray(obj.time.substring(0, 4),categories) >= 0) {
					existingObj = _.find(data.results,function(o){return o.time.substring(0, 4) === obj.time.substring(0, 4); });
					existingObj.count += obj.count;
				} else {
					groupedObjects[i] = obj;
					categories[i] = obj.time.substring(0, 4);
					i++;
				}
			});
			_.each(groupedObjects, function(key, value) {
				myobj[key.time.substring(0, 4)] = key.count;
			});

			if(chartType == "pie") {
				new Chartkick.PieChart(chartName, myobj, {"discrete":true});
			} else if(chartType == "line") {
				new Chartkick.LineChart(chartName, myobj, {"discrete":true});
			} else {
				new Chartkick.LineChart(chartName, myobj, {"discrete":true});
			}
		});
	}

	$('.carousel').carousel({
		interval: 5000 //changes the speed
	})
</script>
<% if content_for? :for_head %>
	<%= yield :for_head %>
<% end %>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<img src="/assets/logo.png" class="logo"><a class="navbar-brand" href="/">Adverse Events & Enforcement<br> Reports for Medical Devices</a>
			</div>
		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<%= link_to "Home", "/" %>
				</li>
				<li>
					<%= link_to "Adverse events", "/enforcements/advevents" %>
				</li>
				<li>
					<%= link_to "Enforcement reports", "/enforcements/enfreports" %>
				</li>
				<li>
					<%= link_to "Medical Devices", "/enforcements/devices" %>
				</li>
				<li >
					<%= link_to "HELP!", "/" %>
				</li>
		  </ul>
				</li>       
		</div>
		<!-- /.navbar-collapse -->
	</div>
	<!-- /.container -->
</nav>

<!-- Header Carousel -->
<header id="myCarousel" class="carousel slide">
	<div class="item active">
		<div class="fill"></div>
		<div class="carousel-caption">
			<h4>Adverse Events & Enforcement <br>Reports for Medical Devices</h4>
		</div>
	</div>
</header>

<!-- Page Content -->
<div class="container">

<%= yield %>

</div>
<!-- /.container -->
<!-- Footer -->
<footer>
	<div class="contatiner footer">
		<div class="col-lg-12">
			<p><center>For GSA Agile Delivery Services BPA-FDA Prototype<br>
			Presented by Â© 2015<a href="http://www.aceinfosolutions.com" target="_blank"><u>Ace Info Solutions</u></a></center></p>
		</div>
	</div>
</footer>
</body>
</html>